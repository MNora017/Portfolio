<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link href="../assets/css/connexion.css" rel="stylesheet">
    <title>Ajax</title>

<script language="JavaScript">

	function submitForm()
	{ 
		var req = null; 

		document.ajax.dyn.value="Started...";
 
		if (window.XMLHttpRequest)
		{
 			req = new XMLHttpRequest();

		} 
		else if (window.ActiveXObject) 
		{
			try {
				req = new ActiveXObject("Msxml2.XMLHTTP");
			} catch (e)
			{
				try {
					req = new ActiveXObject("Microsoft.XMLHTTP"); //Ce constructeur est pour Internet Explorer.
				} catch (e) {} 
			}
        	}


		req.onreadystatechange = function() //  On associe un traitement (une fonction anonyme en l'occurrence) à cet indicateur d'évènement.

		{ 
			document.ajax.dyn.value="Wait server...";
			if(req.readyState == 4) //L'état 4 signifie que la réponse est envoyée par le serveur et disponible.
			{
				if(req.status == 200) //Ce status signifie ok, sinon un code d'erreur quelconque est envoyé, 404 par exemple.
				{
					document.ajax.dyn.value=req.responseText;	
				}	
				else	
				{
					document.ajax.dyn.value="Error: returned status code " + req.status + " " + req.statusText;
				}	
			} 
		}; 
		req.open("GET", "ajax.txt", true); 
		req.send(null); 
	} 
	</script>
	</head>

	<body>
	<form name="ajax" method="POST" action="">
	
		<input type="BUTTON" value="Envoyer"  ONCLICK="submitForm()">
		<samp style="margin-left: 20px;" ></samp>
		Reçu: <input type="text" name="dyn" size="32" value="">
	
	</form>
	</body>
</html>
